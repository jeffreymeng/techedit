<!DOCTYPE html>
<html lang="en">

<head>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="A collaborative programming text editor">
	<meta name="author" content="Techedit">

	<title>Techedit</title>


	<!-- Favicons -->

	<link rel="apple-touch-icon-precomposed" sizes="57x57" href="/favicon/apple-touch-icon-57x57.png" />
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/favicon/apple-touch-icon-114x114.png" />
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/favicon/apple-touch-icon-72x72.png" />
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/favicon/apple-touch-icon-144x144.png" />
	<link rel="apple-touch-icon-precomposed" sizes="60x60" href="/favicon/apple-touch-icon-60x60.png" />
	<link rel="apple-touch-icon-precomposed" sizes="120x120" href="/favicon/apple-touch-icon-120x120.png" />
	<link rel="apple-touch-icon-precomposed" sizes="76x76" href="/favicon/apple-touch-icon-76x76.png" />
	<link rel="apple-touch-icon-precomposed" sizes="152x152" href="/favicon/apple-touch-icon-152x152.png" />
	<link rel="icon" type="image/png" href="/favicon/favicon-196x196.png" sizes="196x196" />
	<link rel="icon" type="image/png" href="/favicon/favicon-96x96.png" sizes="96x96" />
	<link rel="icon" type="image/png" href="/favicon/favicon-32x32.png" sizes="32x32" />
	<link rel="icon" type="image/png" href="/favicon/favicon-16x16.png" sizes="16x16" />
	<link rel="icon" type="image/png" href="/favicon/favicon-128.png" sizes="128x128" />
	<meta name="application-name" content="&nbsp;" />
	<meta name="msapplication-TileColor" content="#FFFFFF" />
	<meta name="msapplication-TileImage" content="/favicon/mstile-144x144.png" />
	<meta name="msapplication-square70x70logo" content="/favicon/mstile-70x70.png" />
	<meta name="msapplication-square150x150logo" content="/favicon/mstile-150x150.png" />
	<meta name="msapplication-wide310x150logo" content="/favicon/mstile-310x150.png" />
	<meta name="msapplication-square310x310logo" content="/favicon/mstile-310x310.png" />

	<!-- End Favicons -->

	<!-- Bootstrap core CSS -->
	<link href="/css/bootstrap.min.css" rel="stylesheet">

	<!-- Font Awesome Icons TODO: subset useed fonts to increase load time -->
	<script src="/font-awesome/js/fa-brands.min.js"></script>
	<script src="/font-awesome/js/fa-regular.min.js"></script>
	<script src="/font-awesome/js/fa-solid.min.js"></script>
	<script src="/font-awesome/js/fontawesome.min.js"></script>
	<!-- ACE -->
	<script src="/ace/ace.js" type="text/javascript" charset="utf-8"></script>

	<!-- Firebase and Firepad -->
	<script src="https://www.gstatic.com/firebasejs/4.8.1/firebase.js"></script>
	<script src="/js/firepad.min.js"></script>
	<link href="/css/firepad.min.css" rel="stylesheet">

	<!-- Custom styles -->
	<style>
		body {
			padding-top: 54px;
			min-height: 90%;
		}

		@media (min-width: 992px) {
			body {
				padding-top: 56px;
			}
		}

		.hidden {
			display: none;
		}

		.invisible {
			visibility: hidden;
		}
		
		/* Block Level */
		
		#block-code,
		#block-404 {
			margin-top: 20px;
			height: 600px;
		}
		
		/* Card */
		#file-wrapper,
		#chat-wrapper {
			margin-top: 20px;
			height: 560px;
		}
		/* Editor */
		
		.firepad {
			/* Width of bootstrap card + padding + border */
			margin-top:50px;
			margin-bottom:49px;
			/* file-wrapper height - margin top - margin bottom*/
			height:460px;
		}
		.firepad,
		#editor {
			
			position: absolute;
			top: 0;
			bottom: 0;
			right: 0;
			left: 0;
		}

		.powered-by-firepad {
			display: none;
		}
		
		/* Misc. Features*/
		#footer-cog,
		#footer-lang,
		#footer-pos {
			color: #717171;
		}

		#footer-cog:hover,
		#footer-lang:hover {
			color: #808080;
		}

		

		/* Aesthetics */
		

		#file-title {
			overflow-x: scroll;
		}

		#chat-msg-box {
			resize: none;
		}

		#options-sidebar {
			position: fixed;
			top: 8em;

		}
	</style>

</head>

<body>

	<!-- Navigation -->
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
		<div class="container">
			<a class="navbar-brand" href="/">Techedit</a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
			<div class="collapse navbar-collapse" id="navbarResponsive">
				<ul class="navbar-nav ml-auto">
					<li class="nav-item active">
						<a class="nav-link" href="/">Home
              </a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#">About</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#">Services</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#">Contact</a>
					</li>
				</ul>
			</div>
		</div>
	</nav>

	<!-- 404 Block -->
	<div class="container hidden" id="block-404">
		<div class="row">
			<div class="col-lg-12 text-center">
				<h1 class="mt-5">404 Error</h1>
				<p class="lead text-muted"><i>File Not Found</i></p>
				<hr>
				<p>There is no page at the current URL. It may have been renamed, moved, or deleted. If you typed a URL by hand, you may wish to double check your spelling.</p>
			</div>
		</div>
	</div>

	<!-- Code Block -->
	<!-- TODO: add hidden when done testing. -->
	<div class="container hidden" id="block-code">
		<div class="row">
			<div class="col-lg-8">

				<div class="card text-center" id="file-wrapper">
					<div class="card-header text-left" id="file-title">
						index.html
					</div>
					<div class="card-body" id="file-body">
						<div id="editor"></div>
					</div>
					<div class="card-footer text-muted text-right">
						<span id="footer-position">0:0</span>&nbsp;&nbsp;<span id="footer-lang">JS</span>&nbsp;&nbsp;<a id="footer-cog" href='javascript:void(0)'><i class="fas fa-cog"></i></a>&nbsp;
					</div>
				</div>
			</div>
			<div class="col-lg-4">

				<div class="card" id="chat-wrapper">
					<div class="card-header text-left" id="chat-title">
						Chat
					</div>
					<div class="card-body">
						<div id="-ksuafhuiaefji" class="message"><b id="-ksuafhuiaefji-id">Dylan:</b>blah blah <b>hi</b> and <i>bye</i></div>
						<div id="-ksuafhuiaefjk" class="message"><b id="-ksuafhuiaefjk-id">You:</b>blah blah <b>hi</b> and <i>bye</i></div>
						<div id="-ksuafhuiaefjm" class="message"><b id="-ksuafhuiaefjm-id">Richard:</b>blah blah <b>hi</b> and <i>bye</i></div>
					</div>
					<div class="card-footer text-muted text-right">
						<textarea class="form-control" placeholder="Message..." id="chat-msg-box"></textarea>
						<button class="btn btn-success btn-block">Send</button>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade in" tabindex="-1" role="dialog" id="options">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Options</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
				</div>
				<div class="modal-body">
					<div class="container-fluid">

						<div class="row">
							<div class="col-md-3 ml-auto">
								<ul class="nav flex-column">
									<li class="nav-item">
										<a class="nav-link active" href="#">Active</a>
									</li>
									<li class="nav-item">
										<a class="nav-link" href="#">Link</a>
									</li>
									<li class="nav-item">
										<a class="nav-link" href="#">Link</a>
									</li>
									<!--<li class="nav-item">
						<a class="nav-link disabled" href="#">Pro</a>
					</li>-->
								</ul>
							</div>
							<div class="col-md-9 ml-auto">
								<h2>Hi</h2>
							</div>
						</div>

					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary">Save changes</button>
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>





	<!-- Bootstrap core JavaScript -->
	<script src="/js/jquery.min.js"></script>
	<script src="/js/bootstrap.bundle.min.js"></script>
	<script>
		/* global firebase ace Firepad $*/


		var config = {
			apiKey: "AIzaSyBQ2E4ISQoIcRsDxfPxzDjbJwmD-r98JYw",
			authDomain: "techedit-63e7f.firebaseapp.com",
			databaseURL: "https://techedit-63e7f.firebaseio.com",
			projectId: "techedit-63e7f",
			storageBucket: "techedit-63e7f.appspot.com",
			messagingSenderId: "609280907475"
		};
		firebase.initializeApp(config);
		// Get Firebase Database reference.
		var ref = firebase.database().ref("/f/test/");

		var editor = ace.edit("editor");
		editor.setTheme("ace/theme/xcode");
		editor.getSession().setMode("ace/mode/javascript");
		editor.setShowPrintMargin(false);
		editor.getSession().setUseWorker(false);

		// Create Firepad.
		var firepad = Firepad.fromACE(ref, editor);



		editor.getSession().selection.on('changeCursor', function(e) {
			var pos = editor.getCursorPosition();
			console.log(pos);
			$("#footer-position").html(pos.row + ":" + pos.column);
		});
		$("#footer-cog").click(function() {
			$("#options").modal("show");
		});
		firepad.on('ready', function() {
			$("#block-code").removeClass("hidden");
		});
	</script>

</body>

</html>
